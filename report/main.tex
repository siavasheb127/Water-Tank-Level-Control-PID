\documentclass{article}

\usepackage{graphicx}
\usepackage{fancyhdr}
\usepackage[sorting=none]{biblatex}
\usepackage[margin=1in]{geometry}
\usepackage{listings}
\usepackage[hidelinks]{hyperref}
\usepackage{subfigure}
\hypersetup{
    colorlinks=true,
    linkcolor=teal,
    filecolor=magenta,      
    urlcolor=teal,
    citecolor = teal
    }
\usepackage{xcolor}
\usepackage{xepersian}


\setlength\headheight{28pt} 
\addbibresource{bibliography.bib}
\settextfont[Scale=1.2]{IRLotus.TTF}
\setlatintextfont[Scale=1]{Times New Roman}
\renewcommand{\baselinestretch}{1.5}
\pagestyle{fancy}
\fancyhf{}
\rhead{\includegraphics[width=1cm]{FaultD.png} تکلیف شماره دو  }
\lhead{\thepage}
\rfoot{سیاوش ابراهیمی کمال }
\lfoot{40214333}
\renewcommand{\headrulewidth}{1pt}
\renewcommand{\footrulewidth}{1pt}
\AtBeginDocument{
	\def\chapterautorefname{فصل}%
	\def\sectionautorefname{پاسخ سوال}%
	\def\subsectionautorefname{بخش}%
	\def\subsubsectionautorefname{بخش}%
	\def\equationautorefname{رابطهٔ}%
    \def\lstlistingautorefname{برنامۀ}%
}
\renewcommand{\lstlistingname}{Code}
\begin{document}

\input{titlepage}

\tableofcontents
\newpage

\section{عنوان سوال اول}\label{Section1}
اگر سوال بخش‌بندی‌شده نباشد، پاسخ آن در این قسمت نوشته می‌شود.
\subsection{عنوان بخش اول سوال اول}
پاسخ بخش اول سوال در این قسمت نوشته می‌شود.
\subsection{عنوان بخش دوم سوال اول}
پاسخ بخش دوم سوال در این قسمت نوشته می‌شود.

\section{عنوان سوال دوم}
در این قسمت با نحوۀ نوشتن متون دارای کلمات انگلیسی آشنا می‌شوید:\\
\indent % برای ایجاد تورفتگی در متن
% کلمات انگلیسی داخل آکولادهای 
% \lr{} 
% نوشته می‌شوند.
تکالیف درس کنترل صنعتی می‌تواند در قالب
\lr{\LaTeX} (\lr{LaTeX})
تحویل داده شوند.

\section{عنوان سوال سوم}
در این قسمت با نحوۀ درج روابط و فرمول‌ها آشنا می‌شوید:\\
\indent % برای ایجاد تورفتگی در متن
اگر می‌خواهید فرمول را درون متن بنویسید از قالبی مانند
$E = m{c}^{2}$
استفاده کنید (فرمول را بین دو علامت دلار قرار دهید).
اگر می‌خواهید فرمول را به‌صورت مجزا نشان دهید به این صورت عمل کنید:
\begin{equation}\label{eq1}
E=M C^2
\end{equation}
برای پاورقی فارسی%
\footnote{پاورقی فارسی}
و برای پاورقی انگلیسی%
\LTRfootnote{Footnote}
به صورتی در فایل \verb|main.tex| آورده شده است عمل کنید.
اگر هم خواستید به صفحۀ جدید بروید از این دستور استفاده کنید: \verb|\pagebreak|.
\pagebreak
\section{عنوان سوال چهارم}
در این قسمت با نحوۀ درج اشکال آشنا می‌شوید:
\begin{figure}[h!]
    \centering
    \includegraphics[width=0.2\textwidth]{KNTULogo.pdf}
    \caption{شکل شماره 1}
    \label{fig1}
\end{figure}

\section{عنوان سوال پنجم}
در این قسمت با نحوۀ درج جداول آشنا می‌شوید:
\begin{table}[h!]
    \centering
    \caption{جدول شماره 1}
    \label{tab1}
    \begin{tabular}{|c|c|c|}
    \hline
    خانه شماره 1 & خانه شماره 2 & خانه شماره 3\\
    \hline
    خانه شماره 4 & خانه شماره 5 & خانه شماره 6\\
    \hline
    خانه شماره 7 & خانه شماره 8 & خانه شماره 9\\
    \hline
    \end{tabular}
\end{table}

\section{عنوان سوال ششم}
در این قسمت با نحوۀ درج انواع لیست‌ها آشنا می‌شوید:
\subsection{عنوان بخش اول سوال ششم}
\begin{itemize}
    \item [$\bullet$] مورد اول
    \item [$\bullet$] مورد دوم
\end{itemize}
\subsection{عنوان بخش دوم سوال ششم}
\begin{enumerate}
    \item مورد شماره 1
    \item مورد شماره 2
\end{enumerate}

\section{عنوان سوال هفتم}
در این قسمت با نحوه درج برنامه‌ها آشنا می‌شوید:
\lr{\lstinputlisting[language=MATLAB, caption={My Caption (Python)} \label{Code1}, showstringspaces=false, basicstyle=\ttfamily, backgroundcolor=\color{yellow!15!white}, breaklines=true]{Source.py}}
\lr{\lstinputlisting[language=MATLAB, caption={My Caption (MATLAB)}, showstringspaces=false, basicstyle=\ttfamily, backgroundcolor=\color{yellow!15!white}, breaklines=true]{Source.m}}
\lr{\lstinputlisting[language=C++, caption={My Caption (C++)}, showstringspaces=false, basicstyle=\ttfamily, backgroundcolor=\color{yellow!15!white}, breaklines=true]{Source.cpp}}
\lr{\lstinputlisting[language=C, caption={My Caption (C)}, showstringspaces=false, basicstyle=\ttfamily, backgroundcolor=\color{yellow!15!white}, breaklines=true]{Source.c}}
\section{عنوان سوال هشتم}
در این قسمت با نحوۀ ارجاع‌دادن آشنا می‌شوید.
\subsection{عنوان بخش اول سوال هشتم}
در این قسمت با نحوۀ ارجاع به سایر منابع آشنا می‌شوید:\\
\indent
به صفحۀ درس کنترل صنعتی ارجاع داده می‌شود \cite{b1}. 
به این کتاب‌ها ارجاع داده می‌شود \cite{b2}\cite{b3}.
برای وارد کردن ارجاع می‌توانید از انتهای فایل 
\verb|main.tex|
استفاده کنید و یا با تغییر قالب مرجع‌نویسی،
به فایل
\verb|bibliography.bib|
مراجعه کرده و فرمت
\verb|.bib|
را وارد کنید.
\subsection{عنوان بخش دوم سوال هشتم}
اگر می‌خواهید به یک شکل، جدول، یا بخش ارجاع دهید می‌توانید به دو صورتی که در ادامه آمده عمل کنید (حالت اول توصیه می‌شود):
\begin{enumerate}
    \item \textbf{مورد شماره 1:} \autoref{Section1}, \autoref{eq1}, \autoref{fig1}, \autoref{tab1}, \autoref{Code1}.
    \item \textbf{مورد شماره 2:} \nameref{Section1}.
\end{enumerate}
\subsection{عنوان بخش سوم سوال هشتم}
اگر می‌خواهید به یک پایگاه اینترنتی ارجاع دهید، می‌توانید از این دستور هم استفاده کنید:
\href{https://github.com/MJAHMADEE/ARASLaTeXFormats}{گیتهاب (\lr{GitHub})}.

\section{ضمیمه}
برای آشنایی بیشتر با \lr{\LaTeX}، با جست‌و‌جو در اینترنت منابع مفیدی خواهید یافت.

%\printbibliography[title=منابع]

\section{پرسش سوم - سیستم کنترل وضعیت موتور DC}\label{Section3}

\subsection{معرفی سیستم و پارامترها}
سیستم کنترل وضعیت موتور DC مطابق شکل زیر در نظر گرفته شده است. مقادیر پارامترهای سیستم برابرند با:

\[K_t = 1, \quad K_b = 0.5, \quad f = 0.2, \quad J = 1, \quad R_a = 2, \quad K_m = 0.8, \quad K_a = 0.05\]

\subsection{بلوک دیاگرام سیستم}
\begin{figure}[h!]
	\centering
	\includegraphics[width=0.8\textwidth]{simdiagram.png} % اگر تصویر بلوک دیاگرام را داری
	\caption{بلوک دیاگرام سیستم کنترل وضعیت موتور DC}
	\label{fig:motor_diagram}
\end{figure}

\subsection{محاسبات دستی تابع تبدیل}

\subsubsection{حلقه باز ($K_t = 0$)}
تابع تبدیل سیستم حلقه باز به صورت زیر محاسبه می‌شود:

\begin{equation}
	G_{open}(s) = K_a \cdot \frac{1}{s} \cdot \text{}\left( \frac{K_m}{R_a} \cdot \frac{1}{Js + f}, K_b \right)
\end{equation}

\begin{equation}
	G_{open}(s) = 0.05 \cdot \frac{1}{s} \cdot \frac{0.4 \cdot \frac{1}{s + 0.2}}{1 + 0.5 \cdot 0.4 \cdot \frac{1}{s + 0.2}}
\end{equation}

\begin{equation}
	G_{open}(s) = 0.05 \cdot \frac{1}{s} \cdot \frac{0.4}{s + 0.4} = \frac{0.02}{s(s + 0.4)}
\end{equation}

\subsubsection{حلقه بسته ($K_t = 1$)}
برای سیستم حلقه بسته داریم:

\begin{equation}
	G_{closed}(s) = \frac{G_{open}(s)}{1 + G_{open}(s) \cdot K_t}
\end{equation}

\begin{equation}
	G_{closed}(s) = \frac{\frac{0.02}{s(s + 0.4)}}{1 + \frac{0.02}{s(s + 0.4)} \cdot 1}
\end{equation}

\begin{equation}
	G_{closed}(s) = \frac{0.02}{s(s + 0.4) + 0.02} = \frac{0.02}{s^2 + 0.4s + 0.02}
\end{equation}

\subsection{محاسبات با استفاده از سیمولینک و دستور linmod}
برای تأیید محاسبات دستی، از سیمولینک متلب و دستور \lr{linmod} استفاده شد.

\lr{\lstinputlisting[language=MATLAB, caption={My Caption (MATLAB)}, showstringspaces=false, basicstyle=\ttfamily, backgroundcolor=\color{yellow!15!white}, breaklines=true]{aaa.m}}

\subsection{نتایج و مقایسه}
نتایج به دست آمده از محاسبات دستی و شبیه‌سازی سیمولینک کاملاً همخوانی داشتند.

\subsection{پاسخ پله سیستم}
پاسخ پله سیستم برای دو مقدار $K_a = 0.05$ و $K_a = 0.1$ در دو حالت حلقه باز و حلقه بسته رسم شد.

\begin{figure}[h!]
	\centering
	\includegraphics[width=0.8\textwidth]{ka005close.png}
	\caption{پاسخ پله سیستم برای مقادیر مختلف $K_a$}
	\label{fig:step_response}
\end{figure}

\subsection{خطای حالت ماندگار}
برای سیستم حلقه بسته با ورودی پله واحد:

\begin{equation}
	e_{ss} = \lim_{s \to 0} s \cdot \frac{1}{s} \cdot \frac{1}{1 + G_{open}(s)K_t} = \frac{1}{1 + \lim_{s \to 0} G_{open}(s)K_t}
\end{equation}

\subsection{محدودیت $K_a$ برای فراجهش کمتر از ۵\%}
برای تعیین محدودیت $K_a$ به گونه‌ای که فراجهش کمتر از ۵\% باشد، از رابطه فراجهش سیستم مرتبه دوم استفاده شد:

\begin{equation}
	M_p = e^{\frac{-\pi\zeta}{\sqrt{1-\zeta^2}}} \leq 0.05
\end{equation}
\section*{منابع}

\renewcommand{\section}[2]{}%
\begin{thebibliography}{99} % assumes less than 100 references
%چنانچه مرجع فارسی نیز داشته باشید باید دستور فوق را فعال کنید و مراجع فارسی خود را بعد از این دستور وارد کنید
\bibitem{b1} \href{https://vc4012.kntu.ac.ir/course/view.php?id=258}{صفحۀ درس تشخیص و شناسایی خطا.}
\begin{LTRitems}
\resetlatinfont
\bibitem{b2} Steven X. Ding, “Data-driven Design of Fault Diagnosis and Fault-tolerant Control System”, Springer, 2014.
\bibitem{b3} S. Theodoridis and K. Koutroumbas, "Pattern recognition", Fourth Edition, Academic Press, 2009.
\end{LTRitems}

\end{thebibliography}

\end{document}
